{% extends "base.html" %}

{% block title %}ATL - Tour Customers{% endblock %}

{% block content %}

<!-- Display a list of the customers on the tour -->

{% if flag == 1 %}
<form action="/Orders" method="post">
<h3 style="background-color: darkblue; color: white; text-align: center;">Total: {{ counts }} Customers</h3>
  <table class="table table-hover">
    <thead class="table-primary">
      <tr>
        <th scope="col">Customer Id</th>
        <th scope="col">Customer Name</th>
        <th scope="col">DoB</th>
        <th scope="col">Email</th>
      </tr>
    </thead>
    <tbody>
      {% for customer in customers %}
      <tr>
        <th scope="row">{{ customer['customerid'] }}</th>
        <td>
          <input type="hidden" name="customerid" value="{{ customer['customerid'] }}">
          <button type="submit">{{ customer['firstname'] }} {{customer['familyname'] }}</button>
        </td>
        <td>{{ customer['dob'] }}</td>
        <td>{{ customer['email'] }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</form>
{% endif %}

{% if flag == 2 %}
 <div class="container mt-5">
        <h2 class="mb-3">Tour Bookings</h2>
        <table class="table table-striped table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>Booking ID</th>
                    <th>Tour Group ID</th>
                    <th>Customer ID</th>
                    <th>First Name</th>
                    <th>Family Name</th>
                    <th>Date of Birth</th>
                    <th>Email</th>
                </tr>
            </thead>
            <tbody>
                {% for r in orderlist %}
                <tr>
                    <td>{{ r['bookingid'] }}</td>
                    <td>{{ r['tourgroupid'] }}</td>
                    <td>{{ r['customerid'] }}</td>
                    <td>{{ r['firstname'] }}</td>
                    <td>{{ r['familyname'] }}</td>
                    <td>{{ r['dob'] }}</td>
                    <td>{{ r['email'] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endif %}

{% if flag == 3 %}
<form method="POST" action="/booking/search">
  <div class="mb-3">
    <label for="customerid" class="form-label">Search by Name:</label>
    <select name="customerid" id="customerid" class="form-select">
        {% for customer in customers %}
            <option value="{{ customer.customerid }}">{{ customer.firstname }} {{ customer.familyname }}</option>
        {% endfor %}
    </select>
    <button type="submit">Search...</button>
  </div>
</form>
{% endif %}

{% if flag == 4 %}
  <div class="container mt-5">
        <h2 class="mb-3">Tour Bookings Summary</h2>
        <table class="table table-striped table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>First Name</th>
                    <th>Family Name</th>
                    <th>Booking ID</th>
                    <th>Tour Group ID</th>
                    <th>Tour ID</th>
                    <th>Tour name</th>
                    <th>Destination ID</th>
                    <th>Destination Name</th>
                    <th>Customer ID</th>
                    <th>Date of Birth</th>
                    <th>Email</th>
                </tr>
            </thead>
            <tbody>
                {% for r in orderlist %}
                <tr>
                    <td>{{ r['firstname'] }}</td>
                    <td>{{ r['familyname'] }}</td>
                    <td>{{ r['bookingid'] }}</td>
                    <td>{{ r['tourgroupid'] }}</td>
                    <td>{{ r['tourid'] }}</td>
                    <td>{{ r['tourname'] }}</td>
                    <td>{{ r['destinationid'] }}</td>
                    <td>{{ r['destinationname'] }}</td>
                    <td>{{ r['customerid'] }}</td>
                    <td>{{ r['dob'] }}</td>
                    <td>{{ r['email'] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endif %}


{% endblock %}